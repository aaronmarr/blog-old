<!doctype html>
<html lang="en" class="text-base sm:text-base md:text-lg lg:text-xl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ renderData.title or title or metadata.title }}</title>
    <meta name="Description" content="{{ renderData.description or description or metadata.description }}">
    <link type="text/css" rel="stylesheet" href="{{ '/build/index.css' | url }}?v=17">
    <link rel="alternate" href="{{ metadata.feed.path | url }}" type="application/atom+xml" title="{{ metadata.title }}">
  </head>
  <body class="font-serif px-4">
    {% set postslist = collections.posts | head(-3) %}
    <header class="[ site-header ] [ my-4 ]">
      <a href="#content" class="visually-hidden">Skip to main content</a>
      <div class="ml-auto mr-auto">
        <div class="flex">
          <h1>
            <a 
              class="[ site-header__link ] [ font-sans font-normal text-sm ]" 
              href="/"
            >
              <span class="font-bold">{{ metadata.title }}</span>
            </a>
          </h1>
          <nav class="pl-4 flex items-center flex-auto text-right">
            <ul class="inline-block w-full">
              {%- for nav in collections.nav -%}
              <li class="ml-3 inline {% if nav.url == page.url %} underline{% endif %}">
                <a class="[ site-header__link ] [ font-sans text-sm ]" href="{{ nav.url | url }}">
                  {{ nav.data.navtitle }}
                </a>
              </li>
              {%- endfor -%}
              <li class="ml-3 inline">
                <a href="#" class="[ site-header__button ] [ p-2 border border-solid font-sans text-sm ]" onclick="localStorage.setItem('mode', (localStorage.getItem('mode') || 'dark') === 'dark' ? 'light' : 'dark'); localStorage.getItem('mode') === 'dark' ? document.querySelector('body').classList.add('dark') : document.querySelector('body').classList.remove('dark')" title="Dark/light">
                  <span class="hidden-when-dark">Dark mode</span>
                  <span class="hidden shown-when-dark">Light mode</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </header>
      <main id="content">
        {{ content | safe }}
      </main>
    <footer class="py-8 mt-8 max-w-xl ml-auto mr-auto">
      <p class="text-sm font-sans">&copy; Aaron Marr 2019.</p>
    </footer>
    <script>
      document.addEventListener('DOMContentLoaded', function(event) {
        ((localStorage.getItem('mode') || 'dark') === 'dark') ? 
          document.querySelector('body').classList.add('dark') : 
          document.querySelector('body').classList.remove('dark');
      })
    </script>
  </body>
</html>
